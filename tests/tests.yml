
# Annotation
- job: tools/annotation/viral_annotation_input.yml
  tool: ../CWL/Tools/Annotation/viral_annotation.cwl
  output:
    annotation_table:
      basename: High_confidence_putative_viral_contigs_prot_ann_table.tsv
      checksum: sha1$e7b28fdae52358fc900616156587212878d4c1e5
      class: File
      location: High_confidence_putative_viral_contigs_prot_ann_table.tsv
      path: High_confidence_putative_viral_contigs_prot_ann_table.tsv
      size: 1568

# Assign
- job: tools/assign/assign_test_input.yml
  tool: ../CWL/Tools/Assign/assign.cwl
  output:
    assign_table:
      basename: High_confidence_putative_viral_contigs_prot_ann_table_tax_assign.tsv
      class: File
      location: High_confidence_putative_viral_contigs_prot_ann_table_tax_assign.tsv
      path: High_confidence_putative_viral_contigs_prot_ann_table_tax_assign.tsv
      size: 468
    stderr:
      basename: stderr.txt
      class: File
      location: stderr.txt
      path: stderr.txt
      size: 15583
    stdout:
      basename: stdout.txt
      class: File
      location: stdout.txt
      path: stdout.txt
      size: 66748

# HMMScan
- job: tools/hmmscan/hmmscan_test_input.yml
  tool: ../CWL/Tools/HMMScan/hmmscan.cwl
  output:
    output_table:
      basename: High_confidence_putative_viral_contigs_prodigal_hmmscan.tbl
      class: File
      location: High_confidence_putative_viral_contigs_prodigal_hmmscan.tbl
      path: High_confidence_putative_viral_contigs_prodigal_hmmscan.tbl
      size: 147451

# Length Filtering
- job: tools/length_filtering/length_filtering_test_input.yml
  tool: ../CWL/Tools/LengthFiltering/length_filtering.cwl
  output:
    filtered_contigs_fasta:
      basename: ERR575691_host_filtered_filt500bp.fasta
      checksum: sha1$d15b69ff3be57c036f8c4585d21855b4bc686c56
      class: File
      location: ERR575691_host_filtered_filt500bp.fasta
      path: ERR575691_host_filtered_filt500bp.fasta
      size: 2212936

# Modification
- job: tools/modification/modification_test_input.yml
  tool: ../CWL/Tools/Modification/processing_hmm_result.cwl
  output:
    modified_file:
      basename: feditorhmmer_ViPhOG_modified.faa
      size: 3966

# Parse
- job: tools/parse/parse_test_input.yml
  tool: ../CWL/Tools/ParsingPredictions/parse_viral_pred.cwl
  output:
    output_fastas:
      - class: File
        basename: high_confidence_putative_viral_contigs.fna
        checksum: sha1$a9e13ac2cbcf79c01fe3d69d157e29fcec7585c3
        location: high_confidence_putative_viral_contigs.fna
        path: high_confidence_putative_viral_contigs.fna
        size: 205451
      - class: File
        basename: low_confidence_putative_viral_contigs.fna
        checksum: sha1$f3a54007ca77eb5f3c6d3d44703a7259e8a5e371
        location: low_confidence_putative_viral_contigs.fna
        path: low_confidence_putative_viral_contigs.fna
        size: 7383
      - class: File
        basename: putative_prophages.fna
        checksum: sha1$3921383191e46a9de9c77b4b77e1bbef7f14c274
        location: putative_prophages.fna
        path: putative_prophages.fna
        size: 83317
    stderr:
      basename: stderr.txt
      checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709
      class: File
      location: stderr.txt
      path: stderr.txt
      size: 0
    stdout:
      basename: stdout.txt
      checksum: sha1$2aa18ea97d384b5093d20c79a506cefeb6a60382
      class: File
      location: stdout.txt
      path: stdout.txt
      size: 392

# Prodigal
- job: tools/prodigal/prodigal_test_input.yml
  tool: ../CWL/Tools/Prodigal/prodigal.cwl 
  output:
    output_fasta:
      basename: high_confidence_putative_viral_contigs_prodigal.faa
      checksum: sha1$68c5a8f77b1063f3fbb0addd20b34b4332328c88
      class: File
      location: high_confidence_putative_viral_contigs_prodigal.faa
      path: high_confidence_putative_viral_contigs_prodigal.faa
      size: 1511386
    stderr:
      basename: stderr.txt
      checksum: sha1$7d8cb56e96afe8062d58021dfc9e415150e3f694
      class: File
      location: stderr.txt
      path: stderr.txt
      size: 10559
    stdout:
      basename: stdout.txt
      checksum: sha1$dcb66eb80d2449200f9360422896726306caffd8
      class: File
      location: stdout.txt
      path: stdout.txt
      size: 1060895

# Ratio evalue
- job: tools/ratio_rvalue/ratio_evalue_test_input.yml
  tool: ../CWL/Tools/RatioEvalue/ratio_evalue.cwl
  output:
    informative_table:
      class: File
      basename: hmmer_ViPhOG_modified_informative.tsv
      location: hmmer_ViPhOG_modified_informative.tsv
      path: hmmer_ViPhOG_modified_informative.tsv
      size: 292
    stderr:
      class: File
      basename: stderr.txt
      checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709
      location: stderr.txt
      path: stderr.txt
      size: 0
    stdout:
      class: File
      basename: stdout.txt
      checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709
      location: stdout.txt
      path: stdout.txt
      size: 0

# VirFinder 
- job: tools/virfinder/virfinder_test_input.yml
  tool: ../CWL/Tools/VirFinder/virfinder.cwl
  output:
    output:
      class: File
      basename: virfinder_output.tsv
      checksum: sha1$a0794a6cd15d7549b704191e21a65e1854c51e9a
      location: virfinder_output.tsv
      path: virfinder_output.tsv
      size: 85756
    stderr:
      class: File
      basename: stderr.txt
      checksum: sha1$852dc33684994e4cf676cbe19cfd4cbdf21493f3
      location: stderr.txt
      path: stderr.txt
      size: 155
    stdout:
      class: File
      basename: stdout.txt
      checksum: sha1$2c95f9a83fa509378180a80f460aff4f60097774
      location: stdout.txt
      path: stdout.txt
      size: 158366

# VirFinder 
- job: tools/virsorter/virsorter_test_input.yml
  tool: ../CWL/Tools/VirSorter/virsorter.cwl
  output:
      predicted_viral_seq_dir:
        basename: Predicted_viral_sequences
        class: Directory
        location: Predicted_viral_sequences
        path: Predicted_viral_sequences
        listing:
          - class: File
            size: 42882
            basename: VIRSorter_cat-1.fasta
            path: VIRSorter_cat-1.fasta
            location: VIRSorter_cat-1.fasta
          - class: File
            size: 159145
            basename: VIRSorter_cat-2.fasta
            path: VIRSorter_cat-2.fasta
            location: VIRSorter_cat-2.fasta
          - class: File
            size: 0
            basename: VIRSorter_cat-3.fasta
            path: VIRSorter_cat-3.fasta
            location: VIRSorter_cat-3.fasta
          - class: File
            size: 43597
            basename: VIRSorter_prophages_cat-4.fasta
            path: VIRSorter_prophages_cat-4.fasta
            location: VIRSorter_prophages_cat-4.fasta
          - class: File
            size: 38377
            basename: VIRSorter_prophages_cat-5.fasta
            path: VIRSorter_prophages_cat-5.fasta
            location: VIRSorter_prophages_cat-5.fasta
          - class: File
            size: 0
            basename: VIRSorter_prophages_cat-6.fasta
            path: VIRSorter_prophages_cat-6.fasta
            location: VIRSorter_prophages_cat-6.fasta
            # not used
          - class: File
            basename: VIRSorter_cat-1.gb
            path: VIRSorter_cat-1.gb
            location: VIRSorter_cat-1.gb
          - class: File
            basename: VIRSorter_cat-2.gb
            path: VIRSorter_cat-2.gb
            location: VIRSorter_cat-2.gb
          - class: File
            basename: VIRSorter_cat-3.gb
            path: VIRSorter_cat-3.gb
            location: VIRSorter_cat-3.gb
          - class: File
            basename: VIRSorter_prophages_cat-4.gb
            path: VIRSorter_prophages_cat-4.gb
            location: VIRSorter_prophages_cat-4.gb
          - class: File
            basename: VIRSorter_prophages_cat-5.gb
            path: VIRSorter_prophages_cat-5.gb
            location: VIRSorter_prophages_cat-5.gb
          - class: File
            path: VIRSorter_prophages_cat-6.gb
            basename: VIRSorter_prophages_cat-6.gb
            location: VIRSorter_prophages_cat-6.gb
      stderr:
        basename: stderr.txt
        class: File
        location: stderr.txt
        path: stderr.txt
        size: 0
      stdout:
        basename: stdout.txt
        class: File
        location: stdout.txt
        path: stdout.txt
        size: 6321

## -- Workflows -- ##
# Pipeline
- job: workflows/pipeline_test_input.yml
  tool: ../CWL/WorkFlow/pipeline.cwl
  output:
      output_length_filtering:
        basename: ERR575691_host_filtered_filt500bp.fasta
        class: File
        location: ERR575691_host_filtered_filt500bp.fasta
        path: ERR575691_host_filtered_filt500bp.fasta
        size: 2212936

      output_parse_stdout:
        basename: stdout.txt
        class: File
        location: stdout.txt
        path: stdout.txt
        size: 392

      output_prodigal:
        - class: File
          size: 109213
          location: High_confidence_putative_viral_contigs_prodigal.faa
          basename: High_confidence_putative_viral_contigs_prodigal.faa
          path: High_confidence_putative_viral_contigs_prodigal.faa
        - class: File
          size: 1343
          location: Low_confidence_putative_viral_contigs_prodigal.faa
          basename: Low_confidence_putative_viral_contigs_prodigal.faa
          path: Low_confidence_putative_viral_contigs_prodigal.faa
        - class: File
          size: 42325
          location: Putative_prophages_prodigal.faa
          basename: Putative_prophages_prodigal.faa
          path: Putative_prophages_prodigal.faa

      output_final_assign:
        - class: File
          size: 468
          location: High_confidence_putative_viral_contigs_prot_ann_table_tax_assign.tsv
          basename: High_confidence_putative_viral_contigs_prot_ann_table_tax_assign.tsv
          path: High_confidence_putative_viral_contigs_prot_ann_table_tax_assign.tsv
        - class: File
          size: 128
          location: Low_confidence_putative_viral_contigs_prot_ann_table_tax_assign.tsv
          basename: Low_confidence_putative_viral_contigs_prot_ann_table_tax_assign.tsv
          path: Low_confidence_putative_viral_contigs_prot_ann_table_tax_assign.tsv
        - class: File
          size: 230
          location: Putative_prophages_prot_ann_table_tax_assign.tsv
          basename: Putative_prophages_prot_ann_table_tax_assign.tsv
          path: Putative_prophages_prot_ann_table_tax_assign.tsv

      output_parse:
        - class: File
          size: 205451
          location: High_confidence_putative_viral_contigs.fna
          basename: High_confidence_putative_viral_contigs.fna
          path: High_confidence_putative_viral_contigs.fna
        - class: File
          size: 2854
          location: Low_confidence_putative_viral_contigs.fna
          basename: Low_confidence_putative_viral_contigs.fna
          path: Low_confidence_putative_viral_contigs.fna
        - class: File
          size: 83317
          location: Putative_prophages.fna
          basename: Putative_prophages.fna
          path: Putative_prophages.fna

      output_virsorter:
        path: Predicted_viral_sequences
        basename: Predicted_viral_sequences
        class: Directory
        location: Predicted_viral_sequences
        listing:
          - class: File
            size: 42882
            basename: VIRSorter_cat-1.fasta
            path: VIRSorter_cat-1.fasta
            location: VIRSorter_cat-1.fasta
          - class: File
            size: 159145
            basename: VIRSorter_cat-2.fasta
            path: VIRSorter_cat-2.fasta
            location: VIRSorter_cat-2.fasta
          - class: File
            size: 0
            basename: VIRSorter_cat-3.fasta
            path: VIRSorter_cat-3.fasta
            location: VIRSorter_cat-3.fasta
          - class: File
            size: 43597
            basename: VIRSorter_prophages_cat-4.fasta
            path: VIRSorter_prophages_cat-4.fasta
            location: VIRSorter_prophages_cat-4.fasta
          - class: File
            size: 38377
            basename: VIRSorter_prophages_cat-5.fasta
            path: VIRSorter_prophages_cat-5.fasta
            location: VIRSorter_prophages_cat-5.fasta
          - class: File
            size: 0
            basename: VIRSorter_prophages_cat-6.fasta
            path: VIRSorter_prophages_cat-6.fasta
            location: VIRSorter_prophages_cat-6.fasta

            # not used
          - class: File
            basename: VIRSorter_cat-1.gb
            path: VIRSorter_cat-1.gb
            location: VIRSorter_cat-1.gb
          - class: File
            basename: VIRSorter_cat-2.gb
            path: VIRSorter_cat-2.gb
            location: VIRSorter_cat-2.gb
          - class: File
            basename: VIRSorter_cat-3.gb
            path: VIRSorter_cat-3.gb
            location: VIRSorter_cat-3.gb
          - class: File
            basename: VIRSorter_prophages_cat-4.gb
            path: VIRSorter_prophages_cat-4.gb
            location: VIRSorter_prophages_cat-4.gb
          - class: File
            basename: VIRSorter_prophages_cat-5.gb
            path: VIRSorter_prophages_cat-5.gb
            location: VIRSorter_prophages_cat-5.gb
          - class: File
            path: VIRSorter_prophages_cat-6.gb
            basename: VIRSorter_prophages_cat-6.gb
            location: VIRSorter_prophages_cat-6.gb

      output_parse_stderr:
        class: File
        size: 0
        basename: stderr.txt
        location: stderr.txt
        path: stderr.txt

      output_virfinder:
        class: File
        size: 37221
        basename: VirFinder_output.tsv
        location: VirFinder_output.tsv
        path: VirFinder_output.tsv

# Sub-workflow
- job: workflows/subworkflow_test_input.yml
  tool: ../CWL/WorkFlow/subworkflow_viral_processing.cwl
  output:
      prodigal_out:
        basename: High_confidence_putative_viral_contigs_prodigal.faa
        class: File
        location: High_confidence_putative_viral_contigs_prodigal.faa
        path: High_confidence_putative_viral_contigs_prodigal.faa
        size: 109213
      hmmscan_out:
        basename: High_confidence_putative_viral_contigs_prodigal_hmmscan.tbl
        class: File
        location: High_confidence_putative_viral_contigs_prodigal_hmmscan.tbl
        path: High_confidence_putative_viral_contigs_prodigal_hmmscan.tbl
        size: 151094
      modification_out:
          basename: High_confidence_putative_viral_contigs_prodigal_hmmscan_modified.faa
          class: File
          location: High_confidence_putative_viral_contigs_prodigal_hmmscan_modified.faa
          path: High_confidence_putative_viral_contigs_prodigal_hmmscan_modified.faa
          size: 105441
      annotation_table:
          basename: High_confidence_putative_viral_contigs_prot_ann_table.tsv
          class: File
          location: High_confidence_putative_viral_contigs_prot_ann_table.tsv
          path: High_confidence_putative_viral_contigs_prot_ann_table.tsv
          size: 37137
      assign_results:
        basename: High_confidence_putative_viral_contigs_prot_ann_table_tax_assign.tsv
        class: File
        location: High_confidence_putative_viral_contigs_prot_ann_table_tax_assign.tsv
        path: High_confidence_putative_viral_contigs_prot_ann_table_tax_assign.tsv
        size: 468
      ratio_evalue_table:
        basename: High_confidence_putative_viral_contigs_prodigal_hmmscan_modified_informative.tsv
        class: File
        location: High_confidence_putative_viral_contigs_prodigal_hmmscan_modified_informative.tsv
        path: High_confidence_putative_viral_contigs_prodigal_hmmscan_modified_informative.tsv
        size: 14375
